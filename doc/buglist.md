# bug记录

记录已修复的bug，方便以后查阅，虽然友盟上有记录，但是我们自己也需要备份一下，比较棘手的bug可以记录在这里，吸取教训。


偶发的一个问题，道具不能刷新，表情都能得到

2、内存溢出（未解决）

```
io.reactivex.exceptions.UndeliverableException: The exception could not be delivered to the consumer because it has already canceled/disposed the flow or the exception has nowhere to go to begin with. Further reading: https://github.com/ReactiveX/RxJava/wiki/What's-different-in-2.0#error-handling | java.lang.OutOfMemoryError: Failed to allocate a 51916812 byte allocation with 4194304 free bytes and 48MB until OOM
    at ht.a.a(SourceFile:367)
    at gv.b$b.run(SourceFile:126)
    at android.os.Handler.handleCallback(Handler.java:815)
    at android.os.Handler.dispatchMessage(Handler.java:104)
    at android.os.Looper.loop(Looper.java:207)
    at android.app.ActivityThread.main(ActivityThread.java:5856)
    at java.lang.reflect.Method.invoke(Native Method)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1026)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:887)
Caused by: java.lang.OutOfMemoryError: Failed to allocate a 51916812 byte allocation with 4194304 free bytes and 48MB until OOM
    at dalvik.system.VMRuntime.newNonMovableArray(Native Method)
    at android.graphics.Bitmap.nativeCopy(Native Method)
    at android.graphics.Bitmap.copy(Bitmap.java:560)
    at a.baozouptu.ptu.PtuActivity$7.a(SourceFile:599)
    at a.baozouptu.ptu.PtuActivity$7.onNext(SourceFile:586)
    at hi.dm$a.onNext(SourceFile:58)
    at hi.cd$a.d(SourceFile:201)
    at hi.cd$a.run(SourceFile:255)
    at gv.b$b.run(SourceFile:124)
    ... 7 more
java.lang.OutOfMemoryError: Failed to allocate a 51916812 byte allocation with 4194304 free bytes and 48MB until OOM
    at dalvik.system.VMRuntime.newNonMovableArray(Native Method)
    at android.graphics.Bitmap.nativeCopy(Native Method)
    at android.graphics.Bitmap.copy(Bitmap.java:560)
    at a.baozouptu.ptu.PtuActivity$7.a(SourceFile:599)
    at a.baozouptu.ptu.PtuActivity$7.onNext(SourceFile:586)
    at hi.dm$a.onNext(SourceFile:58)
    at hi.cd$a.d(SourceFile:201)
    at hi.cd$a.run(SourceFile:255)
    at gv.b$b.run(SourceFile:124)
    at android.os.Handler.handleCallback(Handler.java:815)
    at android.os.Handler.dispatchMessage(Handler.java:104)
    at android.os.Looper.loop(Looper.java:207)
    at android.app.ActivityThread.main(ActivityThread.java:5856)
    at java.lang.reflect.Method.invoke(Native Method)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1026)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:887)

```
3、数组越界
```
java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid view holder adapter positionViewHolder{801e98a position=48 id=-1, oldPos=-1, pLpos:-1 no parent} android.support.v7.widget.RecyclerView{5860a85 VFED..... ........ 0,1125-1080,1716}, adapter:a.baozouptu.ptu.tietu.onlineTietu.c@92530da, layout:a.baozouptu.common.util.WrapContentGridLayoutManager@c54690b, context:a.baozouptu.ptu.PtuActivity@85e8603
	at android.support.v7.widget.RecyclerView$Recycler.boolean validateViewHolderForOffsetPosition(android.support.v7.widget.RecyclerView$ViewHolder)(RecyclerView.java:5715)
	at android.support.v7.widget.RecyclerView$Recycler.android.support.v7.widget.RecyclerView$ViewHolder tryGetViewHolderForPositionByDeadline(int,boolean,long)(RecyclerView.java:5898)
	at android.support.v7.widget.RecyclerView$Recycler.android.view.View getViewForPosition(int,boolean)(RecyclerView.java:5858)
	at android.support.v7.widget.RecyclerView$Recycler.android.view.View getViewForPosition(int)(RecyclerView.java:5854)
	at android.support.v7.widget.LinearLayoutManager$LayoutState.android.view.View next(android.support.v7.widget.RecyclerView$Recycler)(LinearLayoutManager.java:2230)
	at android.support.v7.widget.GridLayoutManager.void layoutChunk(android.support.v7.widget.RecyclerView$Recycler,android.support.v7.widget.RecyclerView$State,android.support.v7.widget.LinearLayoutManager$LayoutState,android.support.v7.widget.LinearLayoutManager$LayoutChunkResult)(GridLayoutManager.java:557)
	at android.support.v7.widget.LinearLayoutManager.int fill(android.support.v7.widget.RecyclerView$Recycler,android.support.v7.widget.LinearLayoutManager$LayoutState,android.support.v7.widget.RecyclerView$State,boolean)(LinearLayoutManager.java:1517)
	at android.support.v7.widget.LinearLayoutManager.int scrollBy(int,android.support.v7.widget.RecyclerView$Recycler,android.support.v7.widget.RecyclerView$State)(LinearLayoutManager.java:1331)
	at android.support.v7.widget.LinearLayoutManager.int scrollHorizontallyBy(int,android.support.v7.widget.RecyclerView$Recycler,android.support.v7.widget.RecyclerView$State)(LinearLayoutManager.java:1063)
	at android.support.v7.widget.GridLayoutManager.int scrollHorizontallyBy(int,android.support.v7.widget.RecyclerView$Recycler,android.support.v7.widget.RecyclerView$State)(GridLayoutManager.java:374)
	at android.support.v7.widget.RecyclerView.void scrollStep(int,int,int[])(RecyclerView.java:1829)
	at android.support.v7.widget.RecyclerView.boolean scrollByInternal(int,int,android.view.MotionEvent)(RecyclerView.java:1927)
	at android.support.v7.widget.RecyclerView.boolean onTouchEvent(android.view.MotionEvent)(RecyclerView.java:3187)
	at android.view.View.null dispatchTouchEvent(null)(View.java:9328)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2564)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2250)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at a.baozouptu.common.view.PtuConstraintLayout.boolean dispatchTouchEvent(android.view.MotionEvent)(PtuConstraintLayout.java:54)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at android.view.ViewGroup.null dispatchTransformedTouchEvent(null)(ViewGroup.java:2570)
	at android.view.ViewGroup.null dispatchTouchEvent(null)(ViewGroup.java:2264)
	at com.android.internal.policy.PhoneWindow$DecorView.null superDispatchTouchEvent(null)(PhoneWindow.java:2452)
	at com.android.internal.policy.PhoneWindow.null superDispatchTouchEvent(null)(PhoneWindow.java:1749)
	at android.app.Activity.null dispatchTouchEvent(null)(Activity.java:2927)
	at android.support.v7.view.WindowCallbackWrapper.boolean dispatchTouchEvent(android.view.MotionEvent)(WindowCallbackWrapper.java:69)
	at com.android.internal.policy.PhoneWindow$DecorView.null dispatchTouchEvent(null)(PhoneWindow.java:2405)
	at android.view.View.null dispatchPointerEvent(null)(View.java:9548)
	at android.view.ViewRootImpl$ViewPostImeInputStage.null processPointerEvent(null)(ViewRootImpl.java:4515)
	at android.view.ViewRootImpl$ViewPostImeInputStage.null onProcess(null)(ViewRootImpl.java:4313)
	at android.view.ViewRootImpl$InputStage.null deliver(null)(ViewRootImpl.java:3823)
	at android.view.ViewRootImpl$InputStage.null onDeliverToNext(null)(ViewRootImpl.java:3883)
	at android.view.ViewRootImpl$InputStage.null forward(null)(ViewRootImpl.java:3842)
	at android.view.ViewRootImpl$AsyncInputStage.null forward(null)(ViewRootImpl.java:3990)
	at android.view.ViewRootImpl$InputStage.null apply(null)(ViewRootImpl.java:3850)
	at android.view.ViewRootImpl$AsyncInputStage.null apply(null)(ViewRootImpl.java:4047)
	at android.view.ViewRootImpl$InputStage.null deliver(null)(ViewRootImpl.java:3823)
	at android.view.ViewRootImpl$InputStage.null onDeliverToNext(null)(ViewRootImpl.java:3883)
	at android.view.ViewRootImpl$InputStage.null forward(null)(ViewRootImpl.java:3842)
	at android.view.ViewRootImpl$InputStage.null apply(null)(ViewRootImpl.java:3850)
	at android.view.ViewRootImpl$InputStage.null deliver(null)(ViewRootImpl.java:3823)
	at android.view.ViewRootImpl.null deliverInputEvent(null)(ViewRootImpl.java:6239)
	at android.view.ViewRootImpl.null doProcessInputEvents(null)(ViewRootImpl.java:6213)
	at android.view.ViewRootImpl.null enqueueInputEvent(null)(ViewRootImpl.java:6174)
	at android.view.ViewRootImpl$WindowInputEventReceiver.null onInputEvent(null)(ViewRootImpl.java:6346)
	at android.view.ViewRootImpl$ColorWindowInputEventReceiver.null onInputEvent(null)(ViewRootImpl.java:7598)
	at android.view.InputEventReceiver.null dispatchInputEvent(null)(InputEventReceiver.java:185)
	at android.view.InputEventReceiver.null nativeConsumeBatchedInputEvents(null)(InputEventReceiver.java)
	at android.view.InputEventReceiver.null consumeBatchedInputEvents(null)(InputEventReceiver.java:176)
	at android.view.ViewRootImpl.null doConsumeBatchedInput(null)(ViewRootImpl.java:6313)
	at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.null run(null)(ViewRootImpl.java:6369)
	at android.view.Choreographer$CallbackRecord.null run(null)(Choreographer.java:862)
	at android.view.Choreographer.null doCallbacks(null)(Choreographer.java:674)
	at android.view.Choreographer.null doFrame(null)(Choreographer.java:604)
	at android.view.Choreographer$FrameDisplayEventReceiver.null run(null)(Choreographer.java:848)
	at android.os.Handler.null handleCallback(null)(Handler.java:739)
	at android.os.Handler.null dispatchMessage(null)(Handler.java:95)
	at android.os.Looper.null loop(null)(Looper.java:179)
	at android.app.ActivityThread.null main(null)(ActivityThread.java:5769)
	at java.lang.reflect.Method.null invoke(null)(Method.java)
	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.null run(null)(ZygoteInit.java:784)
	at com.android.internal.os.ZygoteInit.null main(null)(ZygoteInit.java:674)
```

4、图片文件列表数组越界

```
java.lang.ArrayIndexOutOfBoundsException: length=22; index=-1
	at java.util.ArrayList.get(ArrayList.java:439)
	at j.c.a(SourceFile:119)
	at k.d.b(SourceFile:284)
	at k.c.a(SourceFile:440)
	at k.c.lambda$LOjvoRbuhTFWfNEv-uFVVkfN6CU(Unknown Source:0)
	at k.-$$Lambda$c$LOjvoRbuhTFWfNEv-uFVVkfN6CU.onItemClick(Unknown Source:2)
	at k.e.a(SourceFile:80)
	at k.e.lambda$vBIuZIlEjE3wwtremWtrMWjOR6g(Unknown Source:0)
	at k.-$$Lambda$e$vBIuZIlEjE3wwtremWtrMWjOR6g.onClick(Unknown Source:4)
	at android.view.View.performClick(View.java:6608)
	at android.view.View.performClickInternal(View.java:6585)
	at android.view.View.access$3100(View.java:785)
	at android.view.View$PerformClick.run(View.java:25919)
	at android.os.Handler.handleCallback(Handler.java:873)
	at android.os.Handler.dispatchMessage(Handler.java:99)
	at android.os.Looper.loop(Looper.java:201)
	at android.app.ActivityThread.main(ActivityThread.java:6810)
	at java.lang.reflect.Method.invoke(Native Method)
	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)
	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)java.lang.ArrayIndexOutOfBoundsException: length=22; index=-1
    at java.util.ArrayList.null get(null)(ArrayList.java:439)
    at a.baozouptu.home.data.PicDirInfoManager.java.lang.String getDirPath(int)(PicDirInfoManager.java:119)
    at a.baozouptu.home.localPictuture.LocalPicPresenter.void togglePicData(int)(LocalPicPresenter.java:284)
    at a.baozouptu.home.localPictuture.LocalPicFragment.void lambda$initFileInfoViewData$7(android.support.v7.widget.RecyclerView$ViewHolder)(LocalPicFragment.java:440)
    at a.baozouptu.home.localPictuture.LocalPicFragment.null lambda$LOjvoRbuhTFWfNEv-uFVVkfN6CU(null)(LocalPicFragment.java:0)
    at k.-$$Lambda$c$LOjvoRbuhTFWfNEv-uFVVkfN6CU.null onItemClick(null)(-.java:2)
    at a.baozouptu.home.localPictuture.MyDirListAdapter.void lambda$onCreateViewHolder$1(a.baozouptu.home.localPictuture.MyDirListAdapter$FileChooseHolder,android.view.View)(MyFileListAdapter.java:80)
    at a.baozouptu.home.localPictuture.MyDirListAdapter.null lambda$vBIuZIlEjE3wwtremWtrMWjOR6g(null)(MyFileListAdapter.java:0)
    at k.-$$Lambda$e$vBIuZIlEjE3wwtremWtrMWjOR6g.null onClick(null)(-.java:4)
    at android.view.View.null performClick(null)(View.java:6608)
    at android.view.View.null performClickInternal(null)(View.java:6585)
    at android.view.View.null access$3100(null)(View.java:785)
    at android.view.View$PerformClick.null run(null)(View.java:25919)
    at android.os.Handler.null handleCallback(null)(Handler.java:873)
    at android.os.Handler.null dispatchMessage(null)(Handler.java:99)
    at android.os.Looper.null loop(null)(Looper.java:201)
    at android.app.ActivityThread.null main(null)(ActivityThread.java:6810)
    at java.lang.reflect.Method.null invoke(null)(Method.java)
    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.null run(null)(RuntimeInit.java:547)
    at com.android.internal.os.ZygoteInit.null main(null)(ZygoteInit.java:873)

```

5、gif图数组越界

```
java.lang.NullPointerException: Attempt to get length of null array
    at a.baozouptu.ptu.gif.GifManager.int getFrameChooseCount()(GifManager.java:339)
    at a.baozouptu.ptu.gif.GifManager.void resetPlayer()(GifManager.java:302)
    at a.baozouptu.ptu.gif.GifManager.void setPlayPreview()(GifManager.java:185)
    at a.baozouptu.ptu.gif.GifManager.void lambda$initView$0(android.view.View)(GifManager.java:164)
    at a.baozouptu.ptu.gif.GifManager.null lambda$FCFPButFe17isnxxdnSc0oAtoOA(null)(GifManager.java:0)
    at v.-$$Lambda$g$FCFPButFe17isnxxdnSc0oAtoOA.null onClick(null)(-.java:2)
    at android.view.View.null performClick(null)(View.java:6392)
    at android.view.View$PerformClick.null run(null)(View.java:25140)
    at android.os.Handler.null handleCallback(null)(Handler.java:790)
    at android.os.Handler.null dispatchMessage(null)(Handler.java:99)
    at android.os.Looper.null loop(null)(Looper.java:197)
    at android.app.ActivityThread.null main(null)(ActivityThread.java:7022)
    at java.lang.reflect.Method.null invoke(null)(Method.java)
    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.null run(null)(RuntimeInit.java:515)
    at com.android.internal.os.ZygoteInit.null main(null)(ZygoteInit.java:837)
```

- 2020/6/7 添加空view

```
java.lang.IllegalArgumentException: Cannot add a null child view to a ViewGroup
    at android.view.ViewGroup.null addView(null)(ViewGroup.java:4176)
    at android.support.constraint.ConstraintLayout.null addView(null)(ConstraintLayout.java:634)
    at android.view.ViewGroup.null addView(null)(ViewGroup.java:4156)
    at a.baozouptu.common.view.PtuConstraintLayout.void addPicResourceLv(androidx.recyclerview.widget.RecyclerView)(PtuConstraintLayout.java:59)
    at a.baozouptu.ptu.tietu.TietuFragment_MembersInjector.null a(null)(TietuFragment_MembersInjector.java:474)
    at a.baozouptu.ptu.tietu.TietuFragment_MembersInjector.null a(null)(TietuFragment_MembersInjector.java:350)
    at a.baozouptu.ptu.tietu.TietuFragment_MembersInjector.null lambda$Ph7khUemFqhMEO6Y5GCGBwZo-8g(null)(TietuFragment_MembersInjector.java)
    at a.baozouptu.ptu.tietu.-$$Lambda$e$Ph7khUemFqhMEO6Y5GCGBwZo-8g.null onClick(null)(-.java)
    at android.view.View.null performClick(null)(View.java:5231)
    at android.view.View$PerformClick.null run(null)(View.java:21240)
    at android.os.Handler.null handleCallback(null)(Handler.java:739)
    at android.os.Handler.null dispatchMessage(null)(Handler.java:95)
    at android.os.Looper.null loop(null)(Looper.java:179)
    at android.app.ActivityThread.null main(null)(ActivityThread.java:5769)
    at java.lang.reflect.Method.null invoke(null)(Method.java)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.null run(null)(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.null main(null)(ZygoteInit.java:674)
```

- 2020/6/7 贴图-工具栏-撕图

```
java.lang.NullPointerException: Attempt to invoke virtual method 'boolean a.baozouptu.ptu.tietu.TietuFrameLayout.e()' on a null object reference
    at a.baozouptu.ptu.tietu.TietuFragment.startRendPic(TietuFragment.java:487)
    at a.baozouptu.ptu.tietu.TietuFragment.toRendTietu(TietuFragment.java:402)
    at a.baozouptu.ptu.tietu.TietuFragment.access$400(TietuFragment.java:89)
    at a.baozouptu.ptu.tietu.TietuFragment$3.onItemClick(TietuFragment.java:421)
    at a.baozouptu.ptu.threeLevelFunction.level3ToolUtil.showToolsRcvWindow(level3ToolUtil.java:50)
    at a.baozouptu.ptu.threeLevelFunction.level3ToolUtil.lambda$showToolsRcvWindow$0(level3ToolUtil.java:50)
    at a.baozouptu.ptu.threeLevelFunction.level3ToolUtil.lambda$hH6_8Hb1Auic8PgzhQ_X-iu3plo(level3ToolUtil.java)
    at a.baozouptu.ptu.threeLevelFunction.-$$Lambda$a$hH6_8Hb1Auic8PgzhQ_X-iu3plo.onItemClick(-.java)
    at a.baozouptu.ptu.threeLevelFunction.ThreeLevelToolsAdapter.onCreateViewHolder(ThreeLevelToolsAdapter.java:41)
    at a.baozouptu.ptu.threeLevelFunction.ThreeLevelToolsAdapter.lambda$onCreateViewHolder$0(ThreeLevelToolsAdapter.java:41)
    at a.baozouptu.ptu.threeLevelFunction.ThreeLevelToolsAdapter.lambda$regy5VVPEiECj0gTyr4K-7byPAY(ThreeLevelToolsAdapter.java)
    at a.baozouptu.ptu.threeLevelFunction.-$$Lambda$ThreeLevelToolsAdapter$regy5VVPEiECj0gTyr4K-7byPAY.onClick(-.java)
    at android.view.View.performClick(View.java:5242)
    at android.view.View$PerformClick.run(View.java:21185)
    at android.os.Handler.handleCallback(Handler.java:739)
    at android.os.Handler.dispatchMessage(Handler.java:95)
    at android.os.Looper.loop(Looper.java:145)
    at android.app.ActivityThread.main(ActivityThread.java:6872)
    at java.lang.reflect.Method.invoke(Method.java)
    at java.lang.reflect.Method.invoke(Method.java:372)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1404)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1199)
```